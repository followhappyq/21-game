!function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="public",n(n.s=0)}([function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,o){function a(e){try{i(r.next(e))}catch(e){o(e)}}function d(e){try{i(r.throw(e))}catch(e){o(e)}}function i(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,d)}i((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=n(1),o=n(2);let a,d=1,i=0,c=!1,l=!1,u=!1;const f=[{id:0,cards:[],score:0}],y=()=>{s.getCardButton.classList.remove("hidden"),s.playerEndButton.classList.remove("hidden"),s.newGame.classList.add("hidden"),s.gameFieldPlayers.classList.add("hidden"),1===parseInt(s.numberOfPlayers.value)?(l=!0,d=2):d=parseInt(s.numberOfPlayers.value),p(2,a)},p=(e,t)=>r(void 0,void 0,void 0,(function*(){s.getCardButton.disabled=!0;let n=e;s.loading.classList.add("lds-hourglass");const r=`https://deckofcardsapi.com/api/deck/${t}/draw/?count=${e}`,o=yield fetch(r);if(o.ok){const t=yield o.json();2===e&&m(t.cards[0],t.cards[1])?(t.cards.map(t=>{g(i,t,e)}),s.loading.classList.remove("lds-hourglass"),E()):(t.cards.map(e=>{n-=1,g(i,e,n)}),s.getCardButton.disabled=!1,s.loading.classList.remove("lds-hourglass"))}else console.log(o.status)})),m=(e,t)=>"ACE"===e.value&&"ACE"===t.value,g=(e,t,n)=>{s.cardList.innerHTML+=`<li class="list__item"><img src="${t.image}" alt="${t.code}" class="list__image"></li>`,f[e].cards.push(t);const r=o.CardValues[Object.keys(o.CardValues).find(e=>o.CardValues[e]===t.value.toLowerCase())];f[e].score+=h(r),0===n&&setTimeout(()=>{v(f[e].score)},400),L(e)},h=(e,t=o.DEFAULT_BASE_VALUE)=>t[e],L=e=>{s.playerScore.innerHTML=f[e].score.toString()},v=e=>{i===d-1&&(!l&&e>=o.scoreForWin&&B(),l&&(e>=o.scoreForWin||e===o.scoreForWin-1||e>f[0].score)&&B()),e>=o.scoreForWin&&i!==d-1&&(alert(f[i].score),b())},B=()=>{s.playAgainButton.classList.remove("hidden"),s.getCardButton.classList.add("hidden"),s.playerEndButton.classList.add("hidden"),s.cardList.classList.add("hidden"),f.map(e=>{s.result.insertAdjacentHTML("beforeend",`<p style="color:#fff">Player ${e.id+1} has ${e.score} score.</p>`)}),s.result.insertAdjacentHTML("beforeend",'<h2 style="color:#fff"> Winner</h2>'),A(f,c).map(e=>{s.result.insertAdjacentHTML("beforeend",`<p style="color:#fff">Player ${e.id+1} won, with ${e.score} score.</p>`)})},E=()=>{s.playAgainButton.classList.remove("hidden"),s.getCardButton.classList.add("hidden"),s.playerEndButton.classList.add("hidden"),s.cardList.classList.add("hidden"),s.result.insertAdjacentHTML("beforeend",'<h2 style="color:#fff">This player has got two aces.</h2>')},b=()=>{f[i].score-o.scoreForWin<=0&&(c=!0),l&&f[i].score-o.scoreForWin<=0?(_(),k()):c||i!==d-2?_():w()},_=()=>{s.cardList.innerHTML="",p(2,a),f.push({id:i+1,cards:[],score:0}),i+=1,s.playerName.innerHTML=""+(i+1)},k=()=>{s.getCardButton.classList.add("hidden"),s.playerEndButton.classList.add("hidden");let e=setInterval(()=>{f[0].score>=f[1].score&&20!==f[1].score&&p(1,a),f[0].score<f[1].score&&(u=!0,clearInterval(e))},1e3)},A=(e,t)=>{let n,r=[];return t?(n=e.filter(e=>e.score-21<=0).sort(j),r.push(n[0])):(n=e.filter(e=>e.score-21>0).sort(j),r.push(n[n.length-1])),n.filter(e=>e.score===r[0].score)},j=(e,t)=>t.score-e.score,w=()=>{c=!0,f.push({id:i+1,cards:[],score:0}),B()};s.getCardButton.addEventListener("click",()=>{p(1,a)}),s.playerEndButton.addEventListener("click",()=>{i===d-1?B():b()}),s.newGame.addEventListener("click",y),s.playAgainButton.addEventListener("click",()=>{(e=>{r(void 0,void 0,void 0,(function*(){const t=`https://deckofcardsapi.com/api/deck/${e}/shuffle/`,n=yield fetch(t);n.ok?console.log("The cards are shuffled"):console.log(n.status)}))})(a),f.length=0,f.push({id:0,cards:[],score:0}),i=0,c=!1,s.cardList.innerHTML="",s.result.innerHTML="",s.cardList.classList.remove("hidden"),s.playAgainButton.classList.add("hidden"),u=!1,y()}),window.addEventListener("load",()=>r(void 0,void 0,void 0,(function*(){const e=yield fetch("https://deckofcardsapi.com/api/deck/new/shuffle/?deck_count=1");if(e.ok){const t=yield e.json();a=t.deck_id}else console.log(e.status)})))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loading=t.result=t.cardList=t.playAgainButton=t.playerEndButton=t.getCardButton=t.gameFieldPlayers=t.numberOfPlayers=t.newGame=t.playerScore=t.playerName=void 0,t.playerName=document.getElementById("player-name"),t.playerScore=document.getElementById("player-score"),t.newGame=document.getElementById("new-game"),t.numberOfPlayers=document.getElementById("number-of-players"),t.gameFieldPlayers=document.getElementById("game-field__players"),t.getCardButton=document.getElementById("get-card"),t.playerEndButton=document.getElementById("player-end"),t.playAgainButton=document.getElementById("play-again"),t.cardList=document.getElementById("card-list"),t.result=document.getElementById("result"),t.loading=document.getElementById("loading")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scoreForWin=t.DEFAULT_BASE_VALUE=t.CardValues=void 0,function(e){e.jack="jack",e.queen="queen",e.king="king",e.ace="ace",e.two="2",e.three="3",e.four="4",e.five="5",e.six="6",e.seven="7",e.eight="8",e.nine="9",e.ten="10"}(t.CardValues||(t.CardValues={})),t.DEFAULT_BASE_VALUE={jack:2,queen:3,king:4,ace:11,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10},t.scoreForWin=21}]);